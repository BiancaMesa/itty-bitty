import{Q as x,l as b,m as U,o,f as i,a as c,u as r,w as p,F as f,Z as v,b as e,p as k,c as d,j as u,g as _,t as h}from"./app-BRK3iOnS.js";import{u as w}from"./urlStore-Dc95W8HL.js";import{_ as L}from"./AuthenticatedLayout-Da5hBChO.js";import"ziggy";import"./ApplicationLogo-SyTWJ_B3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"bg-white py-16 px-4 sm:px-6 lg:px-20 min-h-screen flex flex-col"},A=e("h2",{class:"text-sky-800 pb-8 font-extrabold text-center text-3xl"},"Manage Your URLs",-1),S={key:0,class:"text-center"},E=e("p",null,"You have no URLs to manage.",-1),j=[E],C={key:1},D={class:"flex sm:flex-row items-start sm:items-center justify-between p-4 border border-gray-300 rounded-lg bg-white"},$={class:"flex-1 w-full sm:w-auto"},F=e("strong",null,"Name:",-1),N=["href"],B=e("strong",null,"Original URL:",-1),M=["href"],T=e("strong",null,"Shortened URL:",-1),O=["href"],V=["onClick"],Y={class:"mt-8 flex justify-center items-center"},I={__name:"ManageUrls",setup(q){const g=w(),l=x(),m=async t=>{if(confirm("Are you sure you want to delete this URL?"))try{const a=await fetch(route("short.url.delete",{id:t}),{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json"}});if(a.ok)g.deleteShortUrl(t);else{const n=await a.json();alert(n.message||"Failed to delete URL")}}catch{alert("An error occurred while trying to delete the URL")}},y=async()=>{if(confirm("Are you sure you want to delete all URLs?"))try{const t=await fetch(route("short.url.delete.all"),{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json"}});if(t.ok)g.deleteAllShortUrls();else{const a=await t.json();alert(a.message||"Failed to delete URLs")}}catch{alert("An error occurred while trying to delete the URLs")}};return b(async()=>{await g.fetchShortUrls()}),(t,a)=>{const n=U("font-awesome-icon");return o(),i(f,null,[c(r(v),{title:"Manage Your URLs"}),c(L,null,{default:p(()=>[e("main",R,[A,t.$page.props.shortUrls.data.length?(o(),i("div",C,[e("div",{class:"flex justify-center mb-4"},[e("button",{class:"border border-gray-300 px-6 py-2 rounded mb-4 font-bold bg-emerald-50 hover:text-red-400 hover:bg-white hover:border-red-200",onClick:y},"Delete All")]),e("ul",null,[(o(!0),i(f,null,k(r(l).props.shortUrls.data,s=>(o(),i("li",{key:s.id,class:"mb-4"},[e("div",D,[e("div",$,[e("p",null,[F,e("a",{href:s.original_url,class:"text-gray-600 hover:text-blue-400 pl-2 break-all",target:"_blank",rel:"noopener noreferrer"},h(s.title),9,N)]),e("p",null,[B,e("a",{href:s.original_url,class:"text-gray-600 hover:text-blue-400 pl-2 break-all",target:"_blank",rel:"noopener noreferrer"},h(s.original_url),9,M)]),e("p",null,[T,e("a",{href:s.full_shortened_url,class:"text-gray-600 hover:text-blue-400 pl-2 break-all",target:"_blank",rel:"noopener noreferrer"},h(s.full_shortened_url),9,O)])]),e("button",{onClick:K=>m(s.id),class:"mt-4 sm:mt-0 border border-gray-300 px-6 py-2 rounded mb-4 font-bold bg-emerald-50 hover:text-red-400 hover:bg-white hover:border-red-200"},"Delete",8,V)])]))),128))]),e("div",Y,[r(l).props.shortUrls.prev_page_url?(o(),d(r(u),{key:0,href:t.$page.props.shortUrls.first_page_url,class:"mr-2 py-2"},{default:p(()=>[c(n,{icon:"angles-left",class:"text-lg text-gray-300 hover:text-gray-400"})]),_:1},8,["href"])):_("",!0),r(l).props.shortUrls.prev_page_url?(o(),d(r(u),{key:1,href:t.$page.props.shortUrls.prev_page_url,class:"mr-2 px-4 py-2"},{default:p(()=>[c(n,{icon:"chevron-left",class:"text-lg text-gray-300 hover:text-gray-400"})]),_:1},8,["href"])):_("",!0),e("p",null,h(r(l).props.shortUrls.current_page)+" of "+h(r(l).props.shortUrls.last_page),1),r(l).props.shortUrls.next_page_url?(o(),d(r(u),{key:2,href:t.$page.props.shortUrls.next_page_url,class:"ml-2 px-4 py-2"},{default:p(()=>[c(n,{icon:"chevron-right",class:"text-lg text-gray-300 hover:text-gray-400"})]),_:1},8,["href"])):_("",!0),r(l).props.shortUrls.next_page_url?(o(),d(r(u),{key:3,href:t.$page.props.shortUrls.last_page_url,class:"ml-2 py-2"},{default:p(()=>[c(n,{icon:"angles-right",class:"text-lg text-gray-300 hover:text-gray-400"})]),_:1},8,["href"])):_("",!0)])])):(o(),i("div",S,j))])]),_:1})],64)}}};export{I as default};
